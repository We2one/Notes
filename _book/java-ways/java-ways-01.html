
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Java Ways 01 Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="Way to be Java God.">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    
    <link rel="prev" href="../python-basic-notes/day06.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Alright!
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Python Basic Notes</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../python-basic-notes/day01.html">
            
                <a href="../python-basic-notes/day01.html">
            
                    
                    Day01
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../python-basic-notes/day02.html">
            
                <a href="../python-basic-notes/day02.html">
            
                    
                    Day02
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../python-basic-notes/day03.html">
            
                <a href="../python-basic-notes/day03.html">
            
                    
                    Day03
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../python-basic-notes/day04.html">
            
                <a href="../python-basic-notes/day04.html">
            
                    
                    Day04
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="../python-basic-notes/day05.html">
            
                <a href="../python-basic-notes/day05.html">
            
                    
                    Day05
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="../python-basic-notes/day06.html">
            
                <a href="../python-basic-notes/day06.html">
            
                    
                    Day06
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">Java Ways</li>
        
        
    
        <li class="chapter active" data-level="3.1" data-path="java-ways-01.html">
            
                <a href="java-ways-01.html">
            
                    
                    Java Ways 01
            
                </a>
            

            
        </li>
    

    
        
        <li class="divider"></li>
        
        
    
        <li class="chapter " data-level="4.1" >
            
                <a target="_blank" href="https://forgotten-forever.github.io/">
            
                    
                    Liu's Blog
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="4.2" >
            
                <a target="_blank" href="https://www.crushing.xyz/">
            
                    
                    GodLin's Blog
            
                </a>
            

            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Java Ways 01</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="java-ways-01">Java Ways 01</h1>
<h2 id="&#x7EBF;&#x7A0B;&#x5E76;&#x884C;&#xFF0C;&#x540C;&#x4E00;&#x65F6;&#x523B;"><code>&#x7EBF;&#x7A0B;</code>&#x5E76;&#x884C;&#xFF0C;&#x540C;&#x4E00;&#x65F6;&#x523B;</h2>
<ul>
<li><p>To start the threads at <code>exactly</code> the same time (at least as good as possible), you can use a <a href="http://download.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/CyclicBarrier.html" target="_blank">CyclicBarrier</a> :</p>
</li>
<li><p>Codes are as follows:</p>
</li>
</ul>
<pre><code class="lang-Java"><span class="hljs-comment">// We want to start just 2 threads at the same time, but let&apos;s control that </span>
<span class="hljs-comment">// timing from the main thread. That&apos;s why we have 3 &quot;parties&quot; instead of 2.</span>
<span class="hljs-keyword">final</span> CyclicBarrier gate = <span class="hljs-keyword">new</span> CyclicBarrier(<span class="hljs-number">3</span>);

Thread t1 = <span class="hljs-keyword">new</span> Thread(){
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span></span>{
        gate.await();
        <span class="hljs-comment">//do stuff    </span>
    }};
Thread t2 = <span class="hljs-keyword">new</span> Thread(){
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">run</span><span class="hljs-params">()</span></span>{
        gate.await();
        <span class="hljs-comment">//do stuff    </span>
    }};

t1.start();
t2.start();

<span class="hljs-comment">// At this point, t1 and t2 are blocking on the gate. </span>
<span class="hljs-comment">// Since we gave &quot;3&quot; as the argument, gate is not opened yet.</span>
<span class="hljs-comment">// Now if we block on the gate from the main thread, it will open</span>
<span class="hljs-comment">// and all threads will start to do stuff!</span>

gate.await();
System.out.println(<span class="hljs-string">&quot;all threads started&quot;</span>);
</code></pre>
<blockquote>
<p>This doesn&apos;t have to be a <code>CyclicBarrier</code>, you could also use a <code>CountDownLatch</code> or even a lock.</p>
</blockquote>
<ul>
<li>This still can&apos;t make sure that they are started exactly at the same time on standard JVMs, but you can get pretty close. Getting pretty close is still useful when you do for example performance tests. E.g., if you are trying to measure throughput of a data structure with different number of threads hitting it, you want to use this kind of construct to get the most accurate result possible.
On other platforms, starting threads exactly can be a very valid requirement btw.</li>
</ul>
<p><code>From</code> <a href="https://stackoverflow.com/questions/3376586/how-to-start-two-threads-at-exactly-the-same-time" target="_blank">StackOverFlow</a></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="../python-basic-notes/day06.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: Day06">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"description":"Way to be Java God.","title":"Java Ways 01","level":"3.1","depth":1,"next":{"title":"Liu's Blog","level":"4.1","depth":1,"url":"https://forgotten-forever.github.io/","ref":"https://forgotten-forever.github.io/","articles":[]},"previous":{"title":"Day06","level":"2.6","depth":1,"path":"python-basic-notes/day06.md","ref":"python-basic-notes/day06.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["livereload"],"pluginsConfig":{"livereload":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"java-ways/java-ways-01.md","mtime":"2020-08-19T10:24:03.124Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2020-08-19T10:25:43.868Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

